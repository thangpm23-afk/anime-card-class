<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Stats 4 Card</title>
<style>
  body { font-family: Arial; max-width: 700px; margin: 20px auto; padding: 10px; }
  label { display: inline-block; width: 160px; margin-top: 5px; }
  input, select { width: 120px; padding: 5px; margin: 5px 0; }
  button { padding: 7px 15px; margin: 10px 0; }
  pre { background: #eee; padding: 10px; border-radius: 5px; white-space: pre-wrap; }
  .card-input { margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 10px; }
</style>
</head>
<body>

<h2>Ch·ªâ s·ªë Nh√¢n V·∫≠t Theo Tier</h2>

<!-- Card Th∆∞·ªùng -->
<div class="card-input">
  <h3>Card Th∆∞·ªùng (start level 0)</h3>
  <label>DMG c∆° b·∫£n:</label> <input type="text" id="dmgCommon" value="2.11k"><br>
  <label>C·∫•p hi·ªán t·∫°i:</label> <input type="number" id="levelCommon" value="100" min="0"><br>
  <label>Trait:</label>
  <select id="traitCommon">
    <option value="1">Kh√¥ng c√≥</option>
    <option value="1.75">One Above All</option>
    <option value="1.5">Overlord</option>
    <option value="1.3">Blessed</option>
    <option value="1.2">Monarch</option>
    <option value="1.12">Divine</option>
    <option value="1.12">Almighty</option>
  </select><br>
  <button onclick="calcCard('Common')">T√≠nh Card Th∆∞·ªùng</button>
  <pre id="resultCommon"></pre>
</div>

<!-- Card Quest -->
<div class="card-input">
  <h3>Card Quest (start level 50)</h3>
  <label>DMG c∆° b·∫£n:</label> <input type="text" id="dmgQuest" value="2.11k"><br>
  <label>C·∫•p hi·ªán t·∫°i:</label> <input type="number" id="levelQuest" value="100" min="50"><br>
  <label>Trait:</label>
  <select id="traitQuest">
    <option value="1">Kh√¥ng c√≥</option>
    <option value="1.75">One Above All</option>
    <option value="1.5">Overlord</option>
    <option value="1.3">Blessed</option>
    <option value="1.2">Monarch</option>
    <option value="1.12">Divine</option>
    <option value="1.12">Almighty</option>
  </select><br>
  <button onclick="calcCard('Quest')">T√≠nh Card Quest</button>
  <pre id="resultQuest"></pre>
</div>

<!-- Card Tower Story -->
<div class="card-input">
  <h3>Card Tower Story (start level 75)</h3>
  <label>DMG c∆° b·∫£n:</label> <input type="text" id="dmgTower" value="2.11k"><br>
  <label>C·∫•p hi·ªán t·∫°i:</label> <input type="number" id="levelTower" value="100" min="75"><br>
  <label>Trait:</label>
  <select id="traitTower">
    <option value="1">Kh√¥ng c√≥</option>
    <option value="1.75">One Above All</option>
    <option value="1.5">Overlord</option>
    <option value="1.3">Blessed</option>
    <option value="1.2">Monarch</option>
    <option value="1.12">Divine</option>
    <option value="1.12">Almighty</option>
  </select><br>
  <button onclick="calcCard('Tower')">T√≠nh Card Tower Story</button>
  <pre id="resultTower"></pre>
</div>

<!-- Moon Card -->
<div class="card-input">
  <h3>Moon Card (start level 90)</h3>
  <label>DMG c∆° b·∫£n:</label> <input type="text" id="dmgMoon" value="2.11k"><br>
  <label>C·∫•p hi·ªán t·∫°i:</label> <input type="number" id="levelMoon" value="100" min="90"><br>
  <label>Trait:</label>
  <select id="traitMoon">
    <option value="1">Kh√¥ng c√≥</option>
    <option value="1.75">One Above All</option>
    <option value="1.5">Overlord</option>
    <option value="1.3">Blessed</option>
    <option value="1.2">Monarch</option>
    <option value="1.12">Divine</option>
    <option value="1.12">Almighty</option>
  </select><br>
  <button onclick="calcCard('Moon')">T√≠nh Moon Card</button>
  <pre id="resultMoon"></pre>
</div>

<script>
// H√†m parse s·ªë t·ª´ chu·ªói c√≥ k/m
function parseNumber(input) {
    input = input.toLowerCase().trim();
    if(input.endsWith("k")) {
        return parseFloat(input.slice(0,-1)) * 1000;
    } else if(input.endsWith("m")) {
        return parseFloat(input.slice(0,-1)) * 1000000;
    } else {
        return parseFloat(input);
    }
}

function calcCard(cardType) {
    let dmgBase, level, trait, startLevel, resultId;
    switch(cardType){
        case 'Common':
            dmgBase = parseNumber(document.getElementById("dmgCommon").value);
            level = parseInt(document.getElementById("levelCommon").value);
            trait = parseFloat(document.getElementById("traitCommon").value);
            startLevel = 0;
            resultId = "resultCommon";
            break;
        case 'Quest':
            dmgBase = parseNumber(document.getElementById("dmgQuest").value);
            level = parseInt(document.getElementById("levelQuest").value);
            trait = parseFloat(document.getElementById("traitQuest").value);
            startLevel = 50;
            resultId = "resultQuest";
            break;
        case 'Tower':
            dmgBase = parseNumber(document.getElementById("dmgTower").value);
            level = parseInt(document.getElementById("levelTower").value);
            trait = parseFloat(document.getElementById("traitTower").value);
            startLevel = 75;
            resultId = "resultTower";
            break;
        case 'Moon':
            dmgBase = parseNumber(document.getElementById("dmgMoon").value);
            level = parseInt(document.getElementById("levelMoon").value);
            trait = parseFloat(document.getElementById("traitMoon").value);
            startLevel = 90;
            resultId = "resultMoon";
            break;
    }

    let effectiveLevel = Math.max(0, level - startLevel);
    let dmgAfterLevel = dmgBase + dmgBase * 0.0125 * effectiveLevel;
    let hpAfterLevel = dmgAfterLevel * 2;

    dmgAfterLevel *= trait;
    hpAfterLevel *= trait;

    let tiers = {
        basic: {dmg: Math.round(dmgAfterLevel), hp: Math.round(hpAfterLevel)},
        gold: {dmg: Math.round(dmgAfterLevel*4), hp: Math.round(hpAfterLevel*4)},
        rainbow: {dmg: Math.round(dmgAfterLevel*16), hp: Math.round(hpAfterLevel*16)},
        secret: {dmg: Math.round(dmgAfterLevel*64), hp: Math.round(hpAfterLevel*64)}
    };

    document.getElementById(resultId).innerText =
`üìå Basic ‚Üí DMG: ${tiers.basic.dmg}, HP: ${tiers.basic.hp}
‚ú® Gold ‚Üí DMG: ${tiers.gold.dmg}, HP: ${tiers.gold.hp}
üåà Rainbow ‚Üí DMG: ${tiers.rainbow.dmg}, HP: ${tiers.rainbow.hp}
üî• Secret ‚Üí DMG: ${tiers.secret.dmg}, HP: ${tiers.secret.hp}`;
}
</script>

</body>
</html>
